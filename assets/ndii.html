<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Handi Ultra+ Hologram</title>
<meta name="theme-color" content="#071018"/>
<style>
:root{--bg:#071018;--card:#0f1720;--text:#dff8f6;--muted:#9fbfc8;--accent:#00ffc6;--accent2:#00c2ff;--danger:#ff5d7a;--ok:#6ef37b;}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:linear-gradient(180deg,var(--bg),#060b13);color:var(--text)}
.wrap{max-width:1280px;margin:18px auto;padding:18px}
header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
.logo{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:900;color:#001;box-shadow:0 0 14px var(--accent),0 0 28px var(--accent2)}
h1{margin:0;font-size:18px}
.subtitle{color:var(--muted);font-size:13px}
.btn{background:linear-gradient(90deg,var(--accent2),var(--accent));border:none;padding:9px 12px;border-radius:10px;color:#001;font-weight:800;cursor:pointer;transition:.3s;box-shadow:0 0 8px var(--accent2)}
.btn:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 0 14px var(--accent2),0 0 28px var(--accent)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px;margin-top:16px}
.card{background:var(--card);padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.05);transition:.3s}
.card:hover{box-shadow:0 0 20px rgba(0,255,198,.35)}
.small{font-size:12px;color:var(--muted)}
.mono{font-family:monospace}
.tabs{display:flex;gap:8px;margin-bottom:8px}
.tab{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.06);cursor:pointer;transition:.2s}
.tab.active{background:linear-gradient(90deg,var(--accent2),var(--accent));color:#001;box-shadow:0 0 12px var(--accent2)}
#threeClock,#threeGlobe,#threeWeb,#threeDevice{width:100%;height:280px;border-radius:12px;background:#000}
</style>
</head>
<body data-theme="dark">
<div class="wrap">
  <header>
    <div class="logo">HD+</div>
    <div><h1>Handi Ultra+ Hologram</h1>
      <div class="subtitle">Jam Globe • IP Geo • Device Holo • Charts</div></div>
    <div><button class="btn" id="themeBtn">Theme</button></div>
  </header>

  <!-- CLOCK + KALENDER -->
  <div class="grid">
    <div class="card"><h3>Jam 3D Globe</h3>
      <div style="display:flex;justify-content:space-between"><div id="tzBadge">—</div><div id="digitalClock">--:--:--</div></div>
      <div id="threeClock"></div>
      <div class="small">Timezone: <span id="tzName">—</span> • Offset: <span id="tzOffset">—</span></div>
    </div>
    <div class="card"><h3>Kalender</h3><div id="calendar"></div><div class="small">Hari ini: <span id="todayStr">—</span></div></div>
  </div>

  <!-- IP + Globe -->
  <div class="grid">
    <div class="card"><h3>Network & Lokasi</h3>
      <div>IP: <span id="ip">—</span></div>
      <div>ISP: <span id="isp">—</span></div>
      <div>Lokasi: <span id="loc">—</span></div>
      <button class="btn" id="btnIp">Refresh IP</button>
    </div>
    <div class="card"><h3>Globe</h3><div id="threeGlobe"></div></div>
  </div>

  <!-- Charts -->
  <div class="tabs">
    <div class="tab active" data-tab="charts">Charts</div>
    <div class="tab" data-tab="holo">3D Icons</div>
  </div>
  <div id="tab-charts"><div class="grid">
    <div class="card"><h4>FPS</h4><canvas id="fpsChart"></canvas></div>
    <div class="card"><h4>CPU</h4><canvas id="cpuChart"></canvas></div>
    <div class="card"><h4>Battery</h4><canvas id="batChart"></canvas></div>
  </div></div>
  <div id="tab-holo" style="display:none"><div class="grid">
    <div class="card"><h3>Web Icon</h3><div id="threeWeb"></div></div>
    <div class="card"><h3>Device Icon</h3><div id="threeDevice"></div></div>
  </div></div>
</div>

<!-- libs -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/geometries/TextGeometry.js"></script>

<script>
const $=id=>document.getElementById(id),pad=n=>String(n).padStart(2,"0");

/* === Theme toggle === */
$("themeBtn").onclick=()=>{document.body.dataset.theme=document.body.dataset.theme==="dark"?"light":"dark";};

/* === CLOCK Globe === */
let clockScene,clockRenderer,clockCam,clockHands={};
function initThreeClock(){
  const el=$("threeClock"),w=el.clientWidth,h=el.clientHeight;
  clockScene=new THREE.Scene();clockCam=new THREE.PerspectiveCamera(45,w/h,.1,100);clockCam.position.z=7;
  clockRenderer=new THREE.WebGLRenderer({antialias:true,alpha:true});clockRenderer.setSize(w,h);el.innerHTML="";el.appendChild(clockRenderer.domElement);

  const globe=new THREE.Mesh(new THREE.SphereGeometry(2.3,32,32),new THREE.MeshPhongMaterial({color:0x00c2ff,wireframe:true,opacity:0.4}));clockScene.add(globe);
  new THREE.FontLoader().load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",f=>{
    for(let i=1;i<=12;i++){const g=new THREE.TextGeometry(i.toString(),{font:f,size:.35,height:.05});const m=new THREE.MeshBasicMaterial({color:0xffffff});const mesh=new THREE.Mesh(g,m);const a=i/12*Math.PI*2;mesh.position.set(Math.cos(a)*2,Math.sin(a)*2,.2);mesh.lookAt(0,0,0);clockScene.add(mesh);}
  });
  clockHands.hour=new THREE.Mesh(new THREE.BoxGeometry(.1,1.2,.1),new THREE.MeshBasicMaterial({color:0xffffff}));
  clockHands.min=new THREE.Mesh(new THREE.BoxGeometry(.07,1.8,.07),new THREE.MeshBasicMaterial({color:0x00ffc6}));
  clockHands.sec=new THREE.Mesh(new THREE.BoxGeometry(.04,2.2,.04),new THREE.MeshBasicMaterial({color:0xff5d7a}));
  [clockHands.hour,clockHands.min,clockHands.sec].forEach(m=>{m.position.z=.2;clockScene.add(m)});
  clockScene.add(new THREE.AmbientLight(0x334466,1.2));
  (function anim(){requestAnimationFrame(anim);globe.rotation.y+=.002;clockRenderer.render(clockScene,clockCam)})(); }
function updateThreeClock(n){const s=n.getSeconds()+n.getMilliseconds()/1000,m=n.getMinutes()+s/60,h=n.getHours()%12+m/60;clockHands.sec.rotation.z=-s*2*Math.PI/60;clockHands.min.rotation.z=-m*2*Math.PI/60;clockHands.hour.rotation.z=-h*2*Math.PI/12;}
function tick(){const n=new Date();$("digitalClock").textContent=`${pad(n.getHours())}:${pad(n.getMinutes())}:${pad(n.getSeconds())}`;$("tzBadge").textContent=Intl.DateTimeFormat().resolvedOptions().timeZone;$("tzName").textContent=Intl.DateTimeFormat().resolvedOptions().timeZone;const o=-n.getTimezoneOffset(),sign=o>=0?"+":"-",hh=Math.floor(Math.abs(o)/60),mm=Math.abs(o)%60;$("tzOffset").textContent=`${sign}${pad(hh)}:${pad(mm)}`;$("todayStr").textContent=n.toDateString();updateThreeClock(n);requestAnimationFrame(tick);}
function renderCalendar(){const n=new Date(),y=n.getFullYear(),m=n.getMonth(),f=new Date(y,m,1).getDay(),d=new Date(y,m+1,0).getDate();let html='<table style="width:100%;font-size:13px;text-align:center"><tr>'; "SMTWTFS".split("").forEach(x=>html+=`<th>${x}</th>`);html+="</tr><tr>";for(let i=0;i<f;i++)html+="<td></td>";for(let day=1;day<=d;day++){const t=day===n.getDate();html+=`<td style="padding:4px;${t?'background:linear-gradient(90deg,var(--accent2),var(--accent));color:#001;border-radius:6px;':''}">${day}</td>`;if((day+f)%7===0&&day!==d)html+="</tr><tr>"}html+="</tr></table>";$("calendar").innerHTML=html;}

/* === Globe IP === */
let globeScene,globeRenderer,globeCam,globeMarker;
function initGlobe(){const el=$("threeGlobe"),w=el.clientWidth,h=el.clientHeight;globeScene=new THREE.Scene();globeCam=new THREE.PerspectiveCamera(45,w/h,.1,100);globeCam.position.z=4;globeRenderer=new THREE.WebGLRenderer({antialias:true,alpha:true});globeRenderer.setSize(w,h);el.innerHTML="";el.appendChild(globeRenderer.domElement);const s=new THREE.Mesh(new THREE.SphereGeometry(1.3,32,32),new THREE.MeshPhongMaterial({color:0x00c2ff,wireframe:true}));globeScene.add(s);globeMarker=new THREE.Mesh(new THREE.SphereGeometry(.08,16,16),new THREE.MeshBasicMaterial({color:0xff5d7a}));globeScene.add(globeMarker);(function anim(){requestAnimationFrame(anim);s.rotation.y+=.002;globeMarker.material.opacity=Math.abs(Math.sin(Date.now()/500));globeMarker.material.transparent=true;globeRenderer.render(globeScene,globeCam)})(); }
function placeGlobeMarker(g){if(!globeMarker)return;const lat=g.lat*Math.PI/180,lon=g.lon*Math.PI/180,r=1.3;globeMarker.position.set(r*Math.cos(lat)*Math.sin(lon),r*Math.sin(lat),r*Math.cos(lat)*Math.cos(lon));}
async function fetchIP(){try{const r=await fetch("https://ipapi.co/json/");const j=await r.json();$("ip").textContent=j.ip;$("isp").textContent=j.org||"";$("loc").textContent=`${j.city}, ${j.country_name}`;placeGlobeMarker({lat:j.latitude,lon:j.longitude});}catch(e){$("ip").textContent="Err";}}
$("btnIp").onclick=fetchIP;

/* === Charts === */
const fpsArr=[],cpuArr=[],batArr=[];let fpsChart,cpuChart,batChart;
function push(arr,v){arr.push(v);if(arr.length>120)arr.shift();}
function gradient(ctx,color1,color2){const g=ctx.createLinearGradient(0,0,0,220);g.addColorStop(0,color1);g.addColorStop(1,color2);return g;}
function initCharts(){
  fpsChart=new Chart($("fpsChart"),{type:"line",data:{labels:Array(120).fill(""),datasets:[{label:"FPS",data:fpsArr,borderColor:"#00ffc6",backgroundColor:"rgba(0,255,198,.2)",fill:true,tension:.25}]},options:{animation:false,scales:{y:{beginAtZero:true,max:120}}}});
  cpuChart=new Chart($("cpuChart"),{type:"line",data:{labels:Array(120).fill(""),datasets:[{label:"CPU proxy",data:cpuArr,borderColor:"#00c2ff",backgroundColor:"rgba(0,194,255,.2)",fill:true,tension:.25}]},options:{animation:false}});
  batChart=new Chart($("batChart"),{type:"line",data:{labels:Array(120).fill(""),datasets:[{label:"Battery %",data:batArr,borderColor:"#6ef37b",backgroundColor:"rgba(110,243,123,.2)",fill:true,tension:.25}]},options:{animation:false,scales:{y:{beginAtZero:true,max:100}}}});
}
let frames=0,last=performance.now();function loopFPS(now){frames++;if(now-last>=1000){push(fpsArr,frames);frames=0;last=now;fpsChart.update("none");}requestAnimationFrame(loopFPS);}
setInterval(()=>{const t0=performance.now();for(let i=0;i<100000;i++){Math.sqrt(i);}push(cpuArr,(performance.now()-t0).toFixed(2));cpuChart.update("none");},1000);
navigator.getBattery?.().then(b=>{const paint=()=>{push(batArr,Math.round(b.level*100));batChart.update("none");};b.addEventListener("levelchange",paint);paint();});

/* === Neon Icons === */
function neonScene(elId,builder){const el=$(elId),w=el.clientWidth,h=el.clientHeight;const scene=new THREE.Scene();const cam=new THREE.PerspectiveCamera(45,w/h,.1,100);cam.position.z=6;const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});renderer.setSize(w,h);el.innerHTML="";el.appendChild(renderer.domElement);const obj=builder();scene.add(obj);scene.add(new THREE.AmbientLight(0x224455,1.5));(function anim(){requestAnimationFrame(anim);obj.rotation.y+=.01;obj.scale.setScalar(1+0.05*Math.sin(Date.now()/400));renderer.render(scene,cam)})();}
function buildWebIcon(){return new THREE.Mesh(new THREE.TorusKnotGeometry(1,.3,120,16),new THREE.MeshPhongMaterial({color:0x00c2ff,wireframe:true}));}
function buildDeviceIcon(){return new THREE.Mesh(new THREE.BoxGeometry(2.2,4.2,.2),new THREE.MeshPhongMaterial({color:0x00ffc6,wireframe:true}));}

/* === Tabs === */
document.querySelectorAll(".tab").forEach(t=>t.onclick=()=>{document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));t.classList.add("active");$("tab-charts").style.display=t.dataset.tab==="charts"?"":"none";$("tab-holo").style.display=t.dataset.tab==="holo"?"":"none";});

/* === INIT === */
function init(){initThreeClock();initGlobe();initCharts();neonScene("threeWeb",buildWebIcon);neonScene("threeDevice",buildDeviceIcon);tick();renderCalendar();fetchIP();requestAnimationFrame(loopFPS);}
window.onload=init;
</script>
</body>
</html>
